(window.webpackJsonp_ember_auto_import_=window.webpackJsonp_ember_auto_import_||[]).push([[8],{93:function(e,t,i){"use strict"
function n(){var e=new Date,t=e.getDate(),i=e.getMonth()+1,n=e.getFullYear()
return i<10?t+"-0"+i+"-"+n:t+"-"+i+"-"+n}i.r(t),i.d(t,"auto_complete",function(){return d}),i.d(t,"modal_dialog",function(){return g}),i.d(t,"vaccination_card",function(){return m}),i.d(t,"vaccination_module",function(){return f}),i.d(t,"vaccine_table",function(){return j})
var a=i(4),o=function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var t
e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},r=function(e,t){function i(i){return function(r){return function(i){if(n)throw new TypeError("Generator is already executing.")
for(;c;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o
switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i
break
case 4:return c.label++,{value:i[1],done:!1}
case 5:c.label++,a=i[1],i=[0]
continue
case 7:i=c.ops.pop(),c.trys.pop()
continue
default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0
continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1]
break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i
break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i)
break}o[2]&&c.ops.pop(),c.trys.pop()
continue}i=t.call(e,c)}catch(e){i=[6,e],a=0}finally{n=o=0}if(5&i[0])throw i[1]
return{value:i[0]?i[1]:void 0,done:!0}}([i,r])}}var n,a,o,r,c={label:0,sent:function(){if(1&o[0])throw o[1]
return o[1]},trys:[],ops:[]}
return r={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},c=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length
var n=Array(e),a=0
for(t=0;t<i;t++)for(var o=arguments[t],r=0,c=o.length;r<c;r++,a++)n[a]=o[r]
return n},s={apiBasePath:"api/v1",production:{apiBaseURL:"https://nimbox-api-production.herokuapp.com/"},staging:{apiBaseURL:"https://nimbox-api-staging.herokuapp.com/"},development:{apiBaseURL:"http://localhost:5000/"}},l=function(){function e(e,t){this.environment=e,this.token_api_nimbo=t}return e.prototype.deleteVaccineApplication=function(e){return o(this,void 0,void 0,function(){var t,i
return r(this,function(n){switch(n.label){case 0:return(t=new Headers).append("Authorization","Bearer "+this.token_api_nimbo),t.append("Content-Type","application/json"),i=this.get_url(this.environment)+"/vaccine_applications/"+e,[4,fetch(i,{method:"DELETE",headers:t})]
case 1:return[4,n.sent().json()]
case 2:return[2,n.sent()]}})})},e.prototype.organizationData=function(){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,fetch(this.get_url(this.environment)+"/organizations/current",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token_api_nimbo}})]
case 1:return[4,e.sent().json()]
case 2:return[2,e.sent()]}})})},e.prototype.personData=function(e){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,fetch(this.get_url(this.environment)+"/people/"+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token_api_nimbo}})]
case 1:return[4,t.sent().json()]
case 2:return[2,t.sent()]}})})},e.prototype.saveVaccineApplication=function(e){this.updateVaccineApplication(e)},e.prototype.updateName=function(e,t){t.vaccine_name=e.target.value,this.updateVaccineApplication(t)},e.prototype.updateNotes=function(e,t){t.notes=e.target.value,this.updateVaccineApplication(t)},e.prototype.UpdateLote=function(e,t){t.lote=e.target.value,this.updateVaccineApplication(t)},e.prototype.updateApplicationDate=function(e,t){t.application_date=e.target.value,this.updateVaccineApplication(t)},e.prototype.updateApplicationNextDose=function(e,t){t.next_dose=e.target.value,this.updateVaccineApplication(t)},e.prototype.personVaccines=function(e){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,fetch(this.get_url(this.environment)+"/people/"+e+"/vaccine_applications",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token_api_nimbo}})]
case 1:return[4,t.sent().json()]
case 2:return[2,t.sent()]}})})},e.prototype.get_url=function(e){var t=s[""+e]
return null==t?s.staging.apiBaseURL+s.apiBasePath:t.apiBaseURL+s.apiBasePath},e.prototype.updateVaccineApplication=function(e){var t=JSON.stringify(e),i=new Headers
i.append("Authorization","Bearer "+this.token_api_nimbo),i.append("Content-Type","application/json")
var n=this.get_url(this.environment)+"/vaccine_applications/"+e.id
fetch(n,{method:"PUT",headers:i,body:t,redirect:"follow"}).then(function(e){return e.text()})},e.prototype.createVaccine=function(e,t){return o(this,void 0,void 0,function(){var i,n,a
return r(this,function(o){switch(o.label){case 0:return i=JSON.stringify(e),(n=new Headers).append("Authorization","Bearer "+this.token_api_nimbo),n.append("Content-Type","application/json"),a=this.get_url(this.environment)+"/people/"+t+"/create_vaccine_application",[4,fetch(a,{method:"POST",headers:n,body:i,redirect:"follow"})]
case 1:return[4,o.sent().json()]
case 2:return[2,o.sent()]}})})},e.prototype.getVaccines=function(e,t){return o(this,void 0,void 0,function(){return r(this,function(i){switch(i.label){case 0:return[4,fetch(this.get_url(this.environment)+"/vaccines/?language="+t+"&name="+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.token_api_nimbo}})]
case 1:return[4,i.sent().json()]
case 2:return[2,i.sent()]}})})},e}(),d=function(){function e(e){var t=this
switch(Object(a.k)(this,e),this.itemSelected=Object(a.f)(this,"itemSelected",7),this.itemSelectedAddManually=Object(a.f)(this,"itemSelectedAddManually",7),this.inputValue="",this.suggestionArr=[],this.suggestionlist=[],this.suggestionObj=[],this.placeholder="",this.token_api_nimbo="",this.environment="",this.filterKey="",this.findMatch=function(e){if(e.length<3)return[]
var i=t.suggestionlist.filter(function(t){return e=e.toLowerCase(),(t=t.toLowerCase()).includes(e)})
return i=c([t.addVaccinesCaption],i)},this.onInput=function(e){t.inputValue=e.target.value,t.suggestionArr=t.findMatch(t.inputValue),t.showSuggestions=!0},this.onFocus=function(){t.showSuggestions=!0,t.selectedSuggestionIndex=void 0,t.suggestionArr=t.findMatch(t.inputValue)},this.onKeyDown=function(e){switch(e.key){case"ArrowUp":t.suggestionArr.length>0&&(t.selectedSuggestionIndex=void 0===t.selectedSuggestionIndex||0===t.selectedSuggestionIndex?t.suggestionArr.length-1:t.selectedSuggestionIndex-1)
break
case"ArrowDown":t.suggestionArr.length>0&&(t.selectedSuggestionIndex=void 0===t.selectedSuggestionIndex||t.selectedSuggestionIndex===t.suggestionArr.length-1?0:t.selectedSuggestionIndex+1)}},this.onKeyPress=function(e){var i
"Enter"===e.key&&(e.preventDefault(),void 0!==t.selectedSuggestionIndex&&t.onSelect(t.suggestionArr[t.selectedSuggestionIndex])),i=t.language.includes("-")?(i=t.language.split("-"))[0]:t.language,t.dataService.getVaccines(t.inputValue,i).then(function(e){t.suggestionObj=e.vaccines})
var n=t.objectToArray(t.suggestionObj)
t.suggestionlist=n},this.onSelect=function(e){t.selectedSuggestionIndex=void 0,t.showSuggestions=!1,e===t.addVaccinesCaption?t.itemSelectedAddManually.emit(t.inputValue):t.emitSelect(e),t.inputValue=""},this.getSuggestionElement=function(e){var i=void 0!==t.selectedSuggestionIndex&&e===t.suggestionArr[t.selectedSuggestionIndex]
return Object(a.i)("li",{class:"xeph-li "+(i?"xeph-selected":""),onClick:function(){return t.onSelect(e)}},e)},this.dataService=new l(this.environment,this.token_api_nimbo),this.language.includes("-")?this.language.split("-")[0]:this.language){case"es":this.addVaccinesCaption="+ Agregar vacuna manualmente"
break
case"en":this.addVaccinesCaption="+ Add vaccine manually"
break
case"ar":this.addVaccinesCaption="+ اضافة اللقاح يدويا"
break
default:this.addVaccinesCaption="+ Add vaccine manually"}}return e.prototype.objectToArray=function(e){var t=[]
return e.forEach(function(e){t.push(e.name)}),t},e.prototype.handleWindowClick=function(e){this.element.contains(e.target)||(this.showSuggestions=!1,this.selectedSuggestionIndex=void 0)},e.prototype.componentWillLoad=function(){},e.prototype.emitSelect=function(e){var t=this.suggestionObj.filter(function(t){return t.name===e})
t.length>0&&this.itemSelected.emit(t[0])},e.prototype.render=function(){var e=this
return Object(a.i)("div",{class:"xeph-div"},Object(a.i)("input",{class:"xeph-input input-search",type:"text",placeholder:this.placeholder,value:this.inputValue,onInput:function(t){return e.onInput(t)},onFocus:function(){return e.onFocus()},onKeyDown:function(t){return e.onKeyDown(t)},onKeyPress:function(t){return e.onKeyPress(t)}}),Object(a.i)("ul",{class:"xeph-ul",role:"listbox",hidden:!this.showSuggestions},this.suggestionArr.map(function(t){return e.getSuggestionElement(t)})))},Object.defineProperty(e.prototype,"element",{get:function(){return Object(a.h)(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"watchers",{get:function(){return{suggestionlist:["objectToArray"]}},enumerable:!1,configurable:!0}),e}()
d.style='.xeph-div{position:relative;padding:15px}.xeph-input{border-width:1px;border:1px solid #d9e3eb;height:30px;padding:6px 12px;width:96%}@media only screen and (max-width: 500px){.xeph-input{width:100%}}.xeph-input:focus{border-style:solid;border-width:1px;border-color:#3491fe;border-radius:1px;border-bottom:1px solid #0176fe !important;height:30px;padding:6px 12px;outline:none}.input-search{background-image:url("data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJzZWFyY2giIGNsYXNzPSJzdmctaW5saW5lLS1mYSBmYS1zZWFyY2ggZmEtdy0xNiIgcm9sZT0iaW1nIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik01MDUgNDQyLjdMNDA1LjMgMzQzYy00LjUtNC41LTEwLjYtNy0xNy03SDM3MmMyNy42LTM1LjMgNDQtNzkuNyA0NC0xMjhDNDE2IDkzLjEgMzIyLjkgMCAyMDggMFMwIDkzLjEgMCAyMDhzOTMuMSAyMDggMjA4IDIwOGM0OC4zIDAgOTIuNy0xNi40IDEyOC00NHYxNi4zYzAgNi40IDIuNSAxMi41IDcgMTdsOTkuNyA5OS43YzkuNCA5LjQgMjQuNiA5LjQgMzMuOSAwbDI4LjMtMjguM2M5LjQtOS40IDkuNC0yNC42LjEtMzR6TTIwOCAzMzZjLTcwLjcgMC0xMjgtNTcuMi0xMjgtMTI4IDAtNzAuNyA1Ny4yLTEyOCAxMjgtMTI4IDcwLjcgMCAxMjggNTcuMiAxMjggMTI4IDAgNzAuNy01Ny4yIDEyOC0xMjggMTI4eiI+PC9wYXRoPjwvc3ZnPg==");background-size:13px;background-position:center right;background-position:center right 30px, center right 38px;background-repeat:no-repeat}.xeph-ul{margin:0;list-style:none;background-color:white;position:absolute;padding:0;z-index:3;width:97%}.xeph-li{color:#59636d;font-family:"Proxima Nova", Helvetica, Arial, sans-serif;font-size:14px;font-weight:600;padding:10px}.xeph-li:hover{cursor:pointer;background-color:#f9fbfc;color:#0176fe}.xeph-selected{background-color:#f9fbfc;color:#0176fe}'
var p,u={vaccine:"vacuna",title:"vacunas",vaccine_name:"Nombre de la vacuna",lot:"Lote",application_date:"Fecha de aplicación",notes:"Notas",next_dose:"Proxima dosis",placeholder_lot:"Número de Lote",placeholder_notes:"Empieza a escribir...",save:"Guardar",cancel:"Cancelar",delete_vaccine:"Eliminar vacuna",dialog_delete_vaccine:"Se eliminara la vacuna. ¿Desea continuar?",delete:"Eliminar",pacient:"Paciente",born_at:"Fecha de nacimiento",vaccination_card:"Cartilla de vacunación",place_holder_search:"Buscar vacuna..."},h={vaccine:"Vaccine",title:"vaccines",vaccine_name:"Vaccine name",lot:"Lot",application_date:"Application date",notes:"Notes",next_dose:"Next dose",placeholder_lot:"Lot number",placeholder_notes:"Start writing...",save:"Save",cancel:"Cancel",delete_vaccine:"Delete vaccine",dialog_delete_vaccine:"The vaccine will be remove. Do you wish to continue?",delete:"Delete",pacient:"Pacient",born_at:"Born at",vaccination_card:"Vaccination card",place_holder_search:"Search vaccine..."},b={vaccine:"vaccine",title:"vaccines",vaccine_name:"Vaccine name",lot:"Lot",application_date:"Application date",notes:"Notes",next_dose:"Next dose",placeholder_lot:"Lot number",placeholder_notes:"Start writing...",save:"Save",cancel:"Cancel",delete_vaccine:"Delete vaccine",dialog_delete_vaccine:"The vaccine will be remove. Do you wish to continue?",delete:"Delete",place_holder_search:"Buscar vacuna ..."}
!function(e){e.fetchTranslations=function(e){return o(this,void 0,void 0,function(){var t,i,n,a
return r(this,function(o){if(t=e.includes("-")?(t=e.split("-"))[0]:e,(i=JSON.parse(sessionStorage.getItem("i18n."+t)))&&Object.keys(i).length>0)return[2,i]
try{if(n=function(e){var t={}
switch(e){case"es":t=u
break
case"en":t=h
break
case"ar":t=b
break
default:t=h}return t}(t),0!==Object.keys(n).length)return a=n,sessionStorage.setItem("i18n."+t,JSON.stringify(a)),[2,a]}catch(e){console.log(e)}return[2]})})}}(p||(p={}))
var g=function(){function e(e){Object(a.k)(this,e),this.confirmationDelete=Object(a.f)(this,"confirmationDelete",7),this.showModal=!1}return e.prototype.componentWillLoad=function(){return o(this,void 0,void 0,function(){var e
return r(this,function(t){switch(t.label){case 0:return e=this,[4,p.fetchTranslations(this.language)]
case 1:return e.translations=t.sent(),[2]}})})},e.prototype.modalDialog=function(){var e=this
return Object(a.i)("div",{class:"overlay "+(this.showModal?"is-visible":"")},Object(a.i)("div",{class:"modal-window"},Object(a.i)("div",{class:"modal-window__content"},Object(a.i)("div",{class:"modal-header"},Object(a.i)("h4",{class:"title"},this.translations.delete_vaccine)),Object(a.i)("div",{class:"message"},this.translations.dialog_delete_vaccine),Object(a.i)("div",{class:"line-header"}),Object(a.i)("div",{class:"button-group"},Object(a.i)("button",{class:"btn-cancel",onClick:function(){return e.confirmationDelete.emit(!1)}},this.translations.cancel),Object(a.i)("button",{class:"btn-delete",onClick:function(){return e.confirmationDelete.emit(!0)}},this.translations.delete)))))},e.prototype.render=function(){return Object(a.i)("div",null,this.modalDialog())},e}()
g.style='.overlay{opacity:0;visibility:hidden;position:fixed;width:100%;height:100%;top:0;left:0;background:rgba(0, 0, 0, 0.42);-webkit-transition:opacity 0.4s, visibility 0s 0.4s;transition:opacity 0.4s, visibility 0s 0.4s;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;z-index:20}.is-visible{opacity:1;visibility:visible;-webkit-transition:opacity 0.4s;transition:opacity 0.4s}.is-transparent{opacity:0}.modal-window{background:white;border-radius:4px;width:490px;height:180px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.modal-window__content{width:100%;height:100%}.modal-header{border-bottom:#d9e4eb solid 1px;background-color:#fafcfd;margin-top:-20px;padding:10px;height:20px;border-radius:4px 4px 0 0}.close{float:right;margin-top:-42px;margin-right:10px}.title{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;text-transform:uppercase;font-size:14px;font-weight:normal;margin-top:2px;margin-left:15px}.btn-cancel{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;text-transform:uppercase;font-size:14px;font-weight:600;border:solid 1px #d9e3eb;background-color:#d9e3eb;border-radius:3px;padding-top:7px;padding-bottom:7px;padding-left:45px;padding-right:45px;color:dark;margin-top:5px;margin-right:25px;cursor:pointer}.btn-delete{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;text-transform:uppercase;font-size:14px;font-weight:600;border:solid 1px #fa6374;background-color:#fa6374;border-radius:3px;padding-top:7px;padding-bottom:7px;padding-left:45px;padding-right:45px;color:white;margin-top:5px;margin-right:10px;cursor:pointer}.btn-delete:hover{background-color:#e15968}.btn-cancel:hover{background-color:#e1eef4}.message{padding:20px;margin-left:3px;margin-top:10px;margin-bottom:5px;font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;font-size:14px}.button-group{margin-top:15px;margin-left:100px;-ms-flex-pack:center;justify-content:center;text-align:center}.line-header{width:90%;height:1px;background-color:#d9e4eb;margin-left:5%}'
var m=function(){function e(e){Object(a.k)(this,e),this.vaccineDeleted=Object(a.f)(this,"vaccineDeleted",7),this.vaccines=[],this.person=null,this.organization=null,this.dataService=new l(this.environment,this.token_api_nimbo)}return e.prototype.componentWillLoad=function(){return o(this,void 0,void 0,function(){var e
return r(this,function(t){switch(t.label){case 0:return this.retrieveOrganization(),this.retrievePersonData(),e=this,[4,p.fetchTranslations(this.language)]
case 1:return e.translations=t.sent(),[2]}})})},e.prototype.retrievePersonData=function(){var e=this
this.dataService.personData(this.person_id).then(function(t){e.person=t.person})},e.prototype.retrieveOrganization=function(){var e=this
this.dataService.organizationData().then(function(t){e.organization=t.organization})},e.prototype.tableStyle=function(){return{border:"solid 1px black","border-collapse":"collapse",width:"100p%","table-layout":"fixed","font-family":'"Proxima Nova", "Helvetica Neue"'}},e.prototype.borderStyle=function(){return{border:"solid 1px black","text-align":"center","font-family":'"Proxima Nova", "Helvetica Neue"'}},e.prototype.titleStyle=function(){return{position:"relative",color:"gray",left:"90px","font-family":'"Proxima Nova", "Helvetica Neue"'}},e.prototype.imageStyle=function(){return{width:"50px",height:"50px",position:"relative",right:"-250px",top:"10px"}},e.prototype.containerStyle=function(){return{display:"flex"}},e.prototype.vaccinationCardStyle=function(){return{visibility:"hidden","font-family":'"Proxima Nova", "Helvetica Neue"'}},e.prototype.bodyTable=function(){var e=this,t=[]
return this.vaccines.length>0&&this.vaccines.forEach(function(i){t.push(Object(a.i)("tr",{style:e.borderStyle()},Object(a.i)("td",{style:e.borderStyle()}," ",i.vaccine_name),Object(a.i)("td",{style:e.borderStyle()},i.lote),Object(a.i)("td",{style:e.borderStyle()},i.application_date),Object(a.i)("td",{style:e.borderStyle()},i.next_dose),Object(a.i)("td",{style:e.borderStyle()},i.notes)))}),t},e.prototype.table=function(){return Object(a.i)("div",{class:"vaccination-card",style:this.vaccinationCardStyle()},this.organization&&Object(a.i)("div",{style:this.containerStyle()},Object(a.i)("h2",{style:this.titleStyle()},this.organization.name),Object(a.i)("img",{style:this.imageStyle(),src:this.organization.landing_page_info.logo})),this.person&&Object(a.i)("div",null,Object(a.i)("h3",null," ",this.translations.pacient,": ",this.person.full_name),Object(a.i)("h4",null,this.translations.born_at,": ",this.person.born_at)),Object(a.i)("table",{class:"vaccine-table-card",style:this.tableStyle()},Object(a.i)("tr",{style:this.borderStyle()},Object(a.i)("th",{style:this.borderStyle()}," ",this.translations.vaccine),Object(a.i)("th",{style:this.borderStyle()}," ",this.translations.lot," "),Object(a.i)("th",{style:this.borderStyle()}," ",this.translations.application_date),Object(a.i)("th",{style:this.borderStyle()}," ",this.translations.next_dose),Object(a.i)("th",{style:this.borderStyle()}," ",this.translations.notes," ")),this.bodyTable()))},e.prototype.render=function(){return Object(a.i)("div",{class:"vaccineCardFormat",id:"vaccineCardFormat"},this.table())},e}()
m.style=".vaccine-table-card{border:1px solid black;border-collapse:collapse;width:100%}.vaccine-table-cardth{border:1px solid black;border-collapse:collapse;width:100%}.vaccine-table-cardtd{border:1px solid black;border-collapse:collapse;width:100%}#vaccineCardFormat{width:100%;display:none;position:absolute;top:0;left:0}"
var v=function(e){this.id=e.id,this.vaccine_id=e.vaccine_id,this.vaccine_name=e.vaccine_name,this.lote=e.lote,this.application_date=e.application_date,this.next_dose=e.next_dose,this.notes=e.notes,this.readonly=e.readonly,this.new=e.new},f=function(){function e(e){Object(a.k)(this,e),this.show_print=!1,this.vaccines=[],this.dataService=new l(this.environment,this.token_api_nimbo)}return e.prototype.componentWillLoad=function(){return o(this,void 0,void 0,function(){var e,t=this
return r(this,function(i){switch(i.label){case 0:return this.dataService.personVaccines(this.person_id).then(function(e){var i=e.people
i.forEach(function(e){e.readonly=!0,e.new=!1}),t.vaccines=i}),e=this,[4,p.fetchTranslations(this.language)]
case 1:return e.translations=i.sent(),[2]}})})},e.prototype.VaccineSave=function(e){var t=e.detail,i=c(this.vaccines),n=i[t]
n.readonly=!0,n.new=!1,i[t]=n,this.vaccines=i},e.prototype.VaccineEdit=function(e){var t=e.detail,i=c(this.vaccines),n=i[t]
n.readonly=!n.readonly,i[t]=n,this.vaccines=i},e.prototype.VaccinesDelete=function(){var e=this
this.dataService.personVaccines(this.person_id).then(function(t){var i=t.people
i.forEach(function(e){e.readonly=!0,e.new=!1}),e.vaccines=i})},e.prototype.itemSelectedManually=function(e){var t=this,i=""!==e.detail?e.detail:"",a=new v({vaccine_name:i,vaccine_id:"",lote:"",application_date:n(),next_dose:"",notes:"",readonly:!1,new:!0})
this.dataService.createVaccine(a,this.person_id).then(function(e){var i=e.vaccine_application
i.readonly=!1,i.new=!0,t.vaccines=c(t.vaccines,[i])})},e.prototype.itemSelected=function(e){var t=this,i=new v({vaccine_name:e.detail.name,vaccine_id:e.detail.id,lote:e.detail.lote,application_date:n(),next_dose:e.detail.nex_dose,notes:e.detail.notes,readonly:!1,new:!0})
this.dataService.createVaccine(i,this.person_id).then(function(e){var i=e.vaccine_application
i.readonly=!1,i.new=!0,t.vaccines=c(t.vaccines,[i])})},e.prototype.printVaccinationCard=function(){if(this.vaccines.length>0){var e=this.vaccinationCard.innerHTML,t=window.open("","_blank","menubar=no,location=no,resizable=no,scrollbars=yes,status=no,toolbar=no, titlebar=no, height=600px, width=800px")
t.document.write("<html><head><style media='print'>  * { visibility: visible;  } </style><title>"+this.translations.vaccination_card+"</title></head><body>"+e+"</body></html>"),t.window.print(),t.window.close()}},e.prototype.render=function(){var e=this
return Object(a.i)("div",{class:"vaccination-module"},Object(a.i)("div",{class:"vaccination-module-head"},Object(a.i)("div",{class:"title"}," ",this.translations.title," "),this.show_print&&Object(a.i)("div",{class:"print-btn-container"},Object(a.i)("button",{class:"icon-print",onClick:function(){return e.printVaccinationCard()},"aria-label":"print vaccine card"}))),Object(a.i)("auto-complete",{id:"autocomplete",token_api_nimbo:this.token_api_nimbo,language:this.language,environment:this.environment,placeholder:this.translations.place_holder_search}),Object(a.i)("vaccine-table",{vaccines:this.vaccines,environment:this.environment,language:this.language,token_api_nimbo:this.token_api_nimbo}),Object(a.i)("vaccination-card",{ref:function(t){return e.vaccinationCard=t},vaccines:this.vaccines,environment:this.environment,person_id:this.person_id,language:this.language,token_api_nimbo:this.token_api_nimbo}))},e}()
f.style='.vaccination-module{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;border:1px solid #d9e4eb;border-radius:0.25rem;margin-top:10px;width:100%;background:white}.vaccination-module-head{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;background-color:#fdfdfd;border-bottom:1px solid #d9e4eb;border-radius:0.25rem 0.25rem 0 0;height:35px}.icon-print{all:unset;width:32px;height:34px;cursor:pointer;position:relative;border-left:solid 1px #d9e4eb;background-color:none}.icon-print::before{content:"";display:block;width:50%;height:50%;pointer-events:none;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);background-image:url("https://nimbox-production.s3.amazonaws.com/publico/microfrontends/vaccines/print.svg");background-repeat:no-repeat;background-position:center;background-size:contain;-webkit-filter:invert(30%);filter:invert(30%)}.icon-arrow-down{all:unset;width:32px;height:32px;cursor:pointer;position:relative}.title{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;text-transform:uppercase;font-size:12px;font-weight:600;color:#59636d;-ms-flex-align:center;align-items:center;padding:10px}.print-btn-container{float:right;margin-top:-35px}'
var y={buttonLabel:"Selecciona una fecha",placeholder:"YYYY-MM-DD",selectedDateMessage:"La fecha seleccionada es",prevMonthLabel:"Mes anterior",nextMonthLabel:"Mex proximo",monthSelectLabel:"Mes",yearSelectLabel:"Año",closeLabel:"Cerrar ventana",keyboardInstruction:"Puedes usar las teclas flecha, para navegar",calendarHeading:"Selecciona una fecha",dayNames:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],locale:"es-MX"},x={buttonLabel:"Choose date",placeholder:"YYYY-MM-DD",selectedDateMessage:"Selected date is",prevMonthLabel:"Previous month",nextMonthLabel:"Next month",monthSelectLabel:"Month",yearSelectLabel:"Year",closeLabel:"Close window",keyboardInstruction:"You can use arrow keys to navigate dates",calendarHeading:"Choose a date",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],locale:"en-US"},w={buttonLabel:"حدد التاريخ",placeholder:"YYYY-MM-DD",selectedDateMessage:"التاريخ المحدد هو",prevMonthLabel:"الشهر الماضي",nextMonthLabel:"الشهر القادم",monthSelectLabel:"شهر",yearSelectLabel:"عام",closeLabel:"أغلق النافذة",keyboardInstruction:"يمكنك استخدام مفاتيح الأسهم للتنقل بين التواريخ",calendarHeading:"حدد التاريخ",dayNames:["الأحد","الاثنين","يوم الثلاثاء","الأربعاء","يوم الخميس","جمعة","السبت"],monthNames:["يناير","شهر فبراير","مارس","أبريل","يمكن","يونيو","تموز","أغسطس","أيلول","اكتوبر","شهر نوفمبر","ديسمبر"],monthNamesShort:["يناير","فبراير","مارس","أبريل","مايو","يونيو","تموز","أغسطس","سبتمبر","اكتوبر","شهر نوفمبر","ديسمبر"],locale:"ar-Ar"},j=function(){function e(e){switch(Object(a.k)(this,e),this.vaccineDeleted=Object(a.f)(this,"vaccineDeleted",7),this.vaccineEdit=Object(a.f)(this,"vaccineEdit",7),this.vaccineSave=Object(a.f)(this,"vaccineSave",7),this.vaccines=[],this.openModal=!1,this.vaccineItemsShow=[],this.dataService=new l(this.environment,this.token_api_nimbo),this.language){case"es":this.localization=y
break
case"en":this.localization=x
break
case"ar":this.localization=w
break
default:this.localization=x}}return e.prototype.componentWillLoad=function(){return o(this,void 0,void 0,function(){var e
return r(this,function(t){switch(t.label){case 0:return e=this,[4,p.fetchTranslations(this.language)]
case 1:return e.translations=t.sent(),[2]}})})},e.prototype.confirmationDelte=function(e){var t=this
e.detail&&this.dataService.deleteVaccineApplication(this.idVaccineToDelete).then(function(){t.vaccineDeleted.emit()}),this.openModal=!1},e.prototype.deleteVaccineApplication=function(e){this.idVaccineToDelete=e.id,this.openModal=!0},e.prototype.editVaccine=function(e){this.vaccineEdit.emit(e)},e.prototype.cancell=function(e,t){e.new?this.deleteVaccineApplication(e):this.vaccineEdit.emit(t)},e.prototype.saveVaccine=function(e,t){this.dataService.saveVaccineApplication(e),this.vaccineSave.emit(t)},e.prototype.setShowVaccineItem=function(e){this.vaccineItemsShow.length>0&&this.vaccineItemsShow.includes(e)?this.vaccineItemsShow=this.vaccineItemsShow.filter(function(t){return t!==e}):this.vaccineItemsShow=c(this.vaccineItemsShow,[e])},e.prototype.vaccineNameInputStyle=function(){return{width:"88%",height:"30px","margin-top":"-15px","font-size":"12px","font-weight":"600",color:"#76869e"}},e.prototype.vaccineForm=function(){var e=this,t=[]
return this.vaccines.length>0&&this.vaccines.forEach(function(i,n){t.push(Object(a.i)("div",{class:"vaccine-module"},Object(a.i)("div",{class:"flex flex-row vaccine-module-head"},null!==i.vaccine_id?Object(a.i)("label",{class:"tag-vaccine-name"},"  ",i.vaccine_name," "):Object(a.i)("input",{type:"text",style:e.vaccineNameInputStyle(),class:i.readonly?"input-vaccine-name readonly":"input-vaccine-name",disabled:!!i.readonly,id:"name",name:"name",placeholder:e.translations.vaccine_name,value:i.vaccine_name,onInput:function(t){return e.dataService.updateName(t,i)}}),Object(a.i)("div",{class:"btn-group"},Object(a.i)("button",{class:e.vaccineItemsShow.includes(n)?"icon-arrow-up":"icon-arrow-down",onClick:function(){return e.setShowVaccineItem(n)}}))),Object(a.i)("div",{class:e.vaccineItemsShow.includes(n)||i.new?"vaccine-cont show":"vaccine-cont hidden",id:"vaccine-module-item-"+n},Object(a.i)("div",{class:"line-header"}),Object(a.i)("div",{class:"contenedor vaccine-item"},Object(a.i)("div",{class:"date-picker-label"},Object(a.i)("label",null,e.translations.application_date)),Object(a.i)("div",{class:"date-picker"},Object(a.i)("input",{type:"date",class:"application-date-input",disabled:!!i.readonly,id:"vaccine-application-date-"+n,name:"vaccine-application-date-"+n,value:i.application_date,onInput:function(e){return i.application_date=e.target.value}}))),Object(a.i)("div",{class:"contenedor vaccine-item"},Object(a.i)("div",{class:"date-picker-label"},Object(a.i)("div",{class:"next-dose-label"},e.translations.next_dose)),Object(a.i)("div",{class:"date-picker"},Object(a.i)("input",{type:"date",class:"next-dose-input",disabled:!!i.readonly,id:"vaccine-next-dose-"+n,name:"vaccine-next-dose-"+n,value:i.next_dose,onInput:function(e){return i.next_dose=e.target.value}}))),Object(a.i)("div",{class:"contenedor vaccine-item"},Object(a.i)("div",{class:"tag-item"},Object(a.i)("label",null," ",e.translations.lot," ")),Object(a.i)("div",{class:"input-item"},Object(a.i)("input",{type:"text",class:i.readonly?"lote readonly":"lote",id:"lote",placeholder:e.translations.placeholder_lot,disabled:!!i.readonly,name:"lote",value:i.lote,onInput:function(e){return i.lote=e.target.value}}))),Object(a.i)("div",{class:"contenedor vaccine-item"},Object(a.i)("div",{class:"tag-item"},Object(a.i)("label",null," ",e.translations.notes," ")),Object(a.i)("div",{class:"input-item"},Object(a.i)("textarea",{rows:4,class:i.readonly?"notes readonly":"notes",placeholder:e.translations.placeholder_notes,disabled:!!i.readonly,id:"notes",name:"notes",value:i.notes,onInput:function(e){return i.notes=e.target.value}}))),Object(a.i)("div",{class:"vaccine-module-footer"},i.readonly?Object(a.i)("div",{class:"btn-group"},Object(a.i)("button",{class:"icon-edit",onClick:function(){return e.editVaccine(n)}}),Object(a.i)("button",{class:"icon-trash",onClick:function(){return e.deleteVaccineApplication(i)}})):Object(a.i)("div",{class:"btn-group"},Object(a.i)("button",{class:"btn-cancell",onClick:function(){return e.cancell(i,n)}},e.translations.cancel),Object(a.i)("button",{class:"btn-save",onClick:function(){return e.saveVaccine(i,n)}},e.translations.save))))))}),t},e.prototype.render=function(){return Object(a.i)("div",null,this.vaccineForm(),Object(a.i)("modal-dialog",{id:"modal",language:this.language,showModal:this.openModal}))},e}()
j.style='.vaccine-module{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;border:1px solid #d9e4eb;border-radius:0.25rem;margin-bottom:10px;width:96%;margin-left:2%;margin-right:2%}.vaccine-module-head{margin-bottom:10px;border-radius:0.25rem 0.25rem 0 0;padding-top:15px;padding-left:10px}.vaccine-item{padding:14px}.chevron{right:0}.show{display:block}.hidden{display:none}.icon-arrow-down{all:unset;width:32px;height:32px;cursor:pointer;position:relative}.icon-arrow-down::before{content:"";display:block;width:50%;height:50%;background:gray;pointer-events:none;position:absolute;left:28%;top:34%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);mask-image:url("data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJhbmdsZS1kb3duIiBjbGFzcz0ic3ZnLWlubGluZS0tZmEgZmEtYW5nbGUtZG93biBmYS13LTEwIiByb2xlPSJpbWciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDMyMCA1MTIiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTE0MyAzNTIuM0w3IDIxNi4zYy05LjQtOS40LTkuNC0yNC42IDAtMzMuOWwyMi42LTIyLjZjOS40LTkuNCAyNC42LTkuNCAzMy45IDBsOTYuNCA5Ni40IDk2LjQtOTYuNGM5LjQtOS40IDI0LjYtOS40IDMzLjkgMGwyMi42IDIyLjZjOS40IDkuNCA5LjQgMjQuNiAwIDMzLjlsLTEzNiAxMzZjLTkuMiA5LjQtMjQuNCA5LjQtMzMuOCAweiI+PC9wYXRoPjwvc3ZnPg==");-webkit-mask-image:url("data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJhbmdsZS1kb3duIiBjbGFzcz0ic3ZnLWlubGluZS0tZmEgZmEtYW5nbGUtZG93biBmYS13LTEwIiByb2xlPSJpbWciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDMyMCA1MTIiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTE0MyAzNTIuM0w3IDIxNi4zYy05LjQtOS40LTkuNC0yNC42IDAtMzMuOWwyMi42LTIyLjZjOS40LTkuNCAyNC42LTkuNCAzMy45IDBsOTYuNCA5Ni40IDk2LjQtOTYuNGM5LjQtOS40IDI0LjYtOS40IDMzLjkgMGwyMi42IDIyLjZjOS40IDkuNCA5LjQgMjQuNiAwIDMzLjlsLTEzNiAxMzZjLTkuMiA5LjQtMjQuNCA5LjQtMzMuOCAweiI+PC9wYXRoPjwvc3ZnPg==");-webkit-mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain}.icon-arrow-up{all:unset;width:32px;height:32px;cursor:pointer;position:relative}.icon-arrow-up::before{content:"";display:block;width:50%;height:50%;background:gray;pointer-events:none;position:absolute;left:28%;top:34%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);mask-image:url("data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJhbmdsZS11cCIgY2xhc3M9InN2Zy1pbmxpbmUtLWZhIGZhLWFuZ2xlLXVwIGZhLXctMTAiIHJvbGU9ImltZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzIwIDUxMiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTc3IDE1OS43bDEzNiAxMzZjOS40IDkuNCA5LjQgMjQuNiAwIDMzLjlsLTIyLjYgMjIuNmMtOS40IDkuNC0yNC42IDkuNC0zMy45IDBMMTYwIDI1NS45bC05Ni40IDk2LjRjLTkuNCA5LjQtMjQuNiA5LjQtMzMuOSAwTDcgMzI5LjdjLTkuNC05LjQtOS40LTI0LjYgMC0zMy45bDEzNi0xMzZjOS40LTkuNSAyNC42LTkuNSAzNC0uMXoiPjwvcGF0aD48L3N2Zz4=");-webkit-mask-image:url("data:image/svg+xml;base64,PHN2ZyBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJhbmdsZS11cCIgY2xhc3M9InN2Zy1pbmxpbmUtLWZhIGZhLWFuZ2xlLXVwIGZhLXctMTAiIHJvbGU9ImltZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzIwIDUxMiI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMTc3IDE1OS43bDEzNiAxMzZjOS40IDkuNCA5LjQgMjQuNiAwIDMzLjlsLTIyLjYgMjIuNmMtOS40IDkuNC0yNC42IDkuNC0zMy45IDBMMTYwIDI1NS45bC05Ni40IDk2LjRjLTkuNCA5LjQtMjQuNiA5LjQtMzMuOSAwTDcgMzI5LjdjLTkuNC05LjQtOS40LTI0LjYgMC0zMy45bDEzNi0xMzZjOS40LTkuNSAyNC42LTkuNSAzNC0uMXoiPjwvcGF0aD48L3N2Zz4=");-webkit-mask-repeat:no-repeat;-webkit-mask-position:center;mask-position:center;mask-repeat:no-repeat;-webkit-mask-size:contain;mask-size:contain}.icon-trash{all:unset;width:28px;height:28px;cursor:pointer;position:relative;border-radius:0.25rem;margin-right:25px;-webkit-filter:invert(17%) sepia(70%) saturate(7500%) hue-rotate(358deg) brightness(99%) contrast(120%);filter:invert(17%) sepia(70%) saturate(7500%) hue-rotate(358deg) brightness(99%) contrast(120%)}.icon-trash::before{content:"";display:block;width:50%;height:50%;pointer-events:none;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);background:url("https://nimbox-production.s3.amazonaws.com/publico/microfrontends/vaccines/trash.svg");background-repeat:no-repeat;background-position:center;background-size:contain}.icon-edit{all:unset;width:28px;height:28px;cursor:pointer;position:relative;border-radius:0.25rem;margin-right:10px;-webkit-filter:invert(74%) sepia(70%) saturate(3082%) hue-rotate(98deg) brightness(96%) contrast(95%);filter:invert(74%) sepia(70%) saturate(3082%) hue-rotate(98deg) brightness(96%) contrast(95%)}.icon-edit::before{content:"";display:block;width:50%;height:50%;pointer-events:none;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);background:url("https://nimbox-production.s3.amazonaws.com/publico/microfrontends/vaccines/pen.svg");background-repeat:no-repeat;background-position:center;background-size:contain}.line-header{width:98%;height:1px;background-color:#d9e4eb;margin-left:1%}.notes{width:100%;border:1px solid #d9e4eb;padding:6px 12px;resize:none;color:#555555}.notes:hover{width:100%}.notes:focus{border:1px solid #107EFE !important;outline:none}.lote{border:1px solid #d9e4eb !important;width:100% !important;border-radius:1px;height:30px !important;padding:6px 12px !important;color:#555555}.lote:hover{color:#555555;border-radius:1px;height:30px !important;padding:6px 12px}.lote:focus{color:#555555;border:1px solid #107EFE !important;outline:none;height:30px !important;padding:10px}.btn-group{float:right}.btn-save{border:solid 1px #107EFE;background-color:#107EFE;border-radius:5px;padding:8px 15px;color:white;margin-top:5px;margin-right:25px;cursor:pointer;outline:none}.btn-cancell{border:solid 1px #107EFE;border-radius:5px;padding:8px 15px;color:#107EFE;margin-top:5px;margin-right:10px;cursor:pointer;outline:none}.vaccine-module-footer{height:40px;border-radius:0 0 0.25rem 0.25rem;margin-bottom:20px}.input-vaccine-name{margin-top:-2px;border:1px solid #d9e4eb;border-radius:1px;height:22px;padding-left:7px}.input-vaccine-name:focus{border:solid 1px #107EFE;outline:none}.contenedor{font-family:"Proxima Nova", "Helvetica Neue", Helvetica, Arial, sans-serif;display:-ms-flexbox;display:flex;color:#76869e;width:100%;font-size:15px}.date-picker-label{width:15%;margin-top:12px;margin-right:4px}.date-picker{width:30%;margin-left:10px;margin-top:12px}.tag-item{width:13%}.input-item{width:82%;margin-left:30px}.tag-vaccine-name{font-size:18px;padding-bottom:10px;font-weight:500}.next-dose-input{height:30px;font-size:14px;width:94%;border:1px solid #d9e4eb;padding:6px 12px;border-radius:1px}.next-dose-input:focus{border:1px solid #107EFE;outline:none}.application-date-input{height:30px;font-size:14px;width:94%;border:1px solid #d9e4eb;padding:6px 12px;border-radius:1px}.application-date-input:focus{border:1px solid #107EFE;outline:none}.vaccine-cont{-webkit-transition:height 4s;transition:height 4s}.readonly{background-color:#eeeeee !important;color:#59636d !important}'}}])
